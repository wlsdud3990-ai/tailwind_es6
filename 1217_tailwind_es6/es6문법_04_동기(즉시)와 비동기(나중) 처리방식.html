<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>es6문법_04_동기(즉시)와 비동기(나중) 처리방식</title>
</head>
<body>
  <h2>es6문법_04_동기(즉시)와 비동기(나중) 처리방식</h2>
  <p>동기와 비동기의 구분은 요청받고 응답받는 시간대의 차이</p>

  <h3>1. 동기(synchronous) 방식 - 지금 즉시 처리</h3>
  <p>데이터의 요청과 결과가 한 자리에서 동시에 일어나는 것.</p>
  <p>사용자가 데이터를 서버에게 요청하면 그 서버가 데이터 요청에 따른 응답을 사용자에게 다시 리턴해주기 전까지 사용자는 다른 활동을 할 수 없으며 기다려야 한다.</p>
  <p>직원이 1명인 카페에서 A고객이 아메리카노를 주문하면 아메리카노를 만들기 전까지 다음 주문을 받을 수 없는 방식</p>

  <h3>2. 비동기(Asynchronous) 방식 - 나중에 처리</h3>
  <p>데이터 처리가 동시에 일어나지 않는다는 것</p>
  <p>서버에게 데이터를 요청한 후 요청에 따른 응답을 계속 기다리지 않아도 되며 다른 외부활동을 수행하여도 되고, 서버에게 다른 요청사항을 보내도 상관없습니다.</p>
  <p>직원 여러명인 카페에서 A, B, C, D고객의 음료를 각각 주문 받아 제조하는 방식</p>

  <h3>3. call back함수</h3>
  <ul>
    <li>콜백함수는 자바스크립트의 비동기성을 표현하고 관리하는 가장 일반적인 기법이자 가장 기본적인 비동기 패턴이다(You don't know Js)</li>
    <li>"요청 처리가 완료되어 (다시) 사용하세요 !" 라는 신호라고 생각합니다.</li>
    <li>즉, 콜백함수에서 콜백이란 이름이 별도로 있는 것이 아니라, 함수(function)가 있는데, 사용되는 목적/용도가 "call + back" 이라는 것입니다.</li>
    <li>콜백함수가 실행됐다는 것으로 요청한 작업이 끝났음을 알리고, 작업의 결과물을 콜백함수를 통해 사용 가능하게 됩니다.</li>
  </ul>

  <ul>
    <li>회원가입 완료시 '알림'메세지</li>
    <li>영화예매 - 예매완료</li>
    <li>상품주문 - 주문완료</li>
    <li>여행상품 - 예약완료</li>
    <li>계좌이체 - 송금완료</li>
  </ul>

  <h3>비동기 방식의 사례</h3>
  <ul>
    <li>DOM Element의 이벤트 핸들러: 마우스, 키보드 입력, 페이지 로딩 등등</li>
    <li>타이머: 타이머 API(setTimeout 등), 애니메이션 API(requestAnimationFrame)</li>
    <li>서버에 자원요청 및 응답: fetch API, AJAX</li>
  </ul>

  <h3>비동기면 좋은 작업들</h3>
  <ul>
    <li>백그라운드 실행, 로딩 창 실행</li>
    <li>서버로 요청을 보내고 응답을 기다리는 작업(아이디 중복확인)</li>
    <li>대용량의 데이터를 로딩하거나 처리하는 작업</li>
    <li>api 데이터를 로딩하여 삽입하는 콘텐츠(실시간 뉴스콘텐츠)</li>
    <li>api 기상청 날씨 데이터, 영화진흥원에서 제공하는 영화 데이터 api</li>
  </ul>

  <h3>비동기 방식을 위한 방법 3가지</h3>
  <ul>
    <li>callback function</li>
    <li>promise</li>
    <li>async, await</li>
  </ul>

  <h3>비동기 방식으로 데이터 처리하기</h3>
  <p>주의사항 : 함수를 인수로 전달 할 때 괄호는 작성하지 않는다.</p>

  <h4>일반함수 값 : <span id="text01"></span></h4>
  <h4>setTimeOut 값 : <span id="text02"></span></h4>

  <script>
    //1. 변수선언
    const t01 = document.getElementById('text01');
    const t02 = document.getElementById('text02');

    //2. 함수선언과 동시에 내용 작성하기
    function outPut1(){
      t01.innerHTML='저는 일반함수입니다.';
    }

    function outPut2(){
      t02.innerHTML='저는 setTimeout에서 실행되었습니다.';
    }

    //3. 동기와 비동기 방식으로 각각 내용 출력하기
    outPut1(); //동기방식으로 실행

    setTimeout(outPut2, 3000); //비동기방식으로 실행, 키오스크 주문완료 클릭시 몇초뒤에 '띵똥땡~ 벨소리 울림'
  </script>
</body>
</html>